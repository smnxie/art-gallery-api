<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Art Gallery: Home page</title>
  <link rel="stylesheet" href="./css/style.css" />
</head>
<body>

<section class="hero" style="background-image:url('./assets/hero.jpg')">
  <header class="topbar">
    <div class="wrap topbar-inner">
      <a class="brand" href="./index.html">
        <div class="logo">AG</div>
        <div class="brand-text">
          <div class="brand-title">Art Gallery</div>
        </div>
      </a>

      <nav class="nav">
        <a class="nav-link active" href="./index.html">Home</a>
        <a class="nav-link" href="./catalog.html">Catalog</a>
        <a class="nav-link" href="./artists.html">Artists</a>
        <a class="nav-link" href="./contacts.html">Contacts</a>
      </nav>

      <div class="nav-right">
  <a class="btn btn-ghost" href="./auth.html">Login</a>
  <a class="btn btn-primary" href="./auth.html">Create account</a>
</div>

    </div>
    
  </header>

  <main>
    <section class="hero" style="--hero:url('./assets/hero.jpg')">
      <div class="wrap hero-inner">
        <div class="hero-card">
          <h1>Welcome to Art Gallery</h1>
          <p>
            A collection of works by contemporary artists. Here you can find inspiration.
          </p>

          <div class="hero-actions">
            <a class="btn btn-primary" href="./catalog.html">Go to Catalog</a>
            <a class="btn btn-ghost" href="./artists.html">View Artists</a>
          </div>

          <div class="stats">
            <div class="stat">
              <div class="stat-num" id="statArtworks">—</div>
              <div class="stat-label">Artworks in Catalog</div>
            </div>
            <div class="stat">
              <div class="stat-num" id="statArtists">—</div>
              <div class="stat-label">Artists</div>
            </div>
            <div class="stat">
              <div class="stat-num">24/7</div>
              <div class="stat-label">Online Access</div>
            </div>
          </div>
        </div>

        <div class="hero-side">
          <div class="glass">
            <div class="glass-title">What's New</div>
            <ul class="glass-list">
              <li>New artworks are added every week</li>
              <li>Filtering by categories and search</li>
              <li>Author page with contacts</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

  </section>

    <section class="wrap section">
     <div class="section-head">
  <div>
    <h2>Works for inspiration</h2>
    <div class="muted">Powered by The Met Museum API</div>
  </div>

  <div style="display:flex; gap:8px; align-items:center;">
    <input id="metQuery" placeholder="Search artworks..." style="padding:10px 12px; border:1px solid #e5e5e5; border-radius:10px;" />
    <button id="metBtn" class="btn btn-ghost" type="button">Search</button>
  </div>
</div>


      <div class="grid" id="featuredGrid"></div>
    </section>
  </main>

  <footer class="footer">
    <div class="wrap footer-inner">
      <div class="muted">© 2026 Yasmin's Art Gallery</div>
    </div>
  </footer>

<script>
  const grid = document.getElementById("featuredGrid");
  const statArtworks = document.getElementById("statArtworks");

  function escapeHtml(s) {
    return String(s || "")
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  function renderCards(items) {
    grid.innerHTML = "";

    for (const a of items) {
      const title = escapeHtml(a.title || "Untitled");
      const artist = escapeHtml(a.artist || "Unknown artist");
      const img = a.imageUrl || "";
      const url = a.objectURL || "#";

      const card = document.createElement("div");
      card.className = "card"; 
      card.innerHTML = `
        <a href="${url}" target="_blank" rel="noreferrer" style="text-decoration:none; color:inherit;">
          <div style="border-radius:14px; overflow:hidden; border:1px solid #eee;">
            <img src="${img}" alt="${title}" style="width:100%; height:220px; object-fit:cover; display:block;">
          </div>
          <div style="padding:10px 4px;">
            <div style="font-weight:600; margin-bottom:4px;">${title}</div>
            <div class="muted" style="font-size:13px;">${artist}</div>
          </div>
        </a>
      `;
      grid.appendChild(card);
    }
  }

  async function loadMet(q = "art") {
    try {
      grid.innerHTML = "<div class='muted'>Loading...</div>";
      const res = await fetch(`/api/met/artworks?q=${encodeURIComponent(q)}`);
      const data = await res.json();

      renderCards(data.artworks || []);
      if (statArtworks) statArtworks.textContent = String(data.count ?? (data.artworks || []).length);
    } catch (e) {
      grid.innerHTML = "<div class='muted'>Failed to load artworks.</div>";
    }
  }


  const metQuery = document.getElementById("metQuery");
  const metBtn = document.getElementById("metBtn");

  if (metBtn && metQuery) {
    metBtn.addEventListener("click", () => {
      const q = (metQuery.value || "art").trim();
      loadMet(q);
    });
    metQuery.addEventListener("keydown", (e) => {
      if (e.key === "Enter") metBtn.click();
    });
  }

  loadMet("art");
</script>


  <script src="./js/site.js"></script>
</body>
</html>
